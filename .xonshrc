# XONSH WEBCONFIG START
$PROMPT = '{YELLOW}{env_name} {BOLD_GREEN}{cwd} {gitstatus}{NO_COLOR} {prompt_end} '
$XONSH_COLOR_STYLE = 'monokai'
xontrib load fzf-widgets
# XONSH WEBCONFIG END

# set up fzf 
from prompt_toolkit.keys import Keys

$fzf_history_binding = Keys.ControlR
$fzf_ssh_binding = Keys.ControlS
$fzf_file_binding = Keys.ControlT


# jump around directories, w/ learning
xontrib load z



$VI_MODE = True


$PATH += ["/usr/local/bin", "/usr/local/opt/llvm/bin", "/Users/remi/.local/bin", "./scripts","$HOME/go/bin"]


# pyenv
xontrib load pyenv


# Applications-specific

### pants ###
import resource
nofile = resource.getrlimit(resource.RLIMIT_NOFILE)
resource.setrlimit(resource.RLIMIT_NOFILE, (1000, nofile[1]))



### git ###
# Aliases based on oh-my-zsh default
aliases['g']='git'
aliases['gfa']='git fetch --all --prune'
aliases['gcb']='git checkout -b'
aliases['gst']='git status'
aliases['gl']='git pull'
aliases['gup']='git fetch && git rebase'
aliases['gp']='git push'
aliases['gpf']='git push --force'
aliases['gc']='git commit -v'
aliases['gcaa']='git commit -v -a --amend'
aliases['gca']='git commit -v -a'
aliases['gco']='git checkout'
aliases['gcm']='git checkout master'
aliases['gb']='git branch'
aliases['gba']='git branch -a'
aliases['gcount']='git shortlog -sn'
aliases['gcp']='git cherry-pick'
aliases['glg']='git log --stat --max-count=5'
aliases['glgg']='git log --graph --max-count=5'
aliases['gss']='git status -s'
aliases['ga']='git add'
aliases['gm']='git merge'
aliases['grh']='git reset HEAD'
aliases['grhh']='git reset HEAD --hard'
# Git and svn mix
aliases['git-svn-dcommit-push']='git svn dcommit && git push github master:svntrunk'
aliases['gsr']='git svn rebase'
aliases['gsd']='git svn dcommit'
#
# Will return the current branch name
# Usage example: git pull origin $(current_branch)
#
def current_branch():
  ref_result = $(git symbolic-ref HEAD).strip().split('/')
  if len(ref_result) != 3:
    return None
  return ref_result[2]
# these aliases take advantage of the previous function
aliases['ggpull']='git pull origin @(current_branch())'
aliases['ggpush']='git push origin @(current_branch())'
aliases['gpsup']='git push --set-upstream origin @(current_branch())'
aliases['ggpnp']='git pull origin @(current_branch()) && git push origin @(current_branch())'



